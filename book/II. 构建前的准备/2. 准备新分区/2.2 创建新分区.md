
# 创建新分区

像其他操作系统一样，LFS一般被安装在专用的分区上。构建LFS系统时，推荐的方法是使用一个可用的空闲分区，或者你有足够的未分区空间来创建一个分区。

一个最小的系统需要大概4GB的分区空间，这已经足够存储所有的源码包和编译软件包了。但是，如果LFS系统想要成为一个真正的Linux系统，可能要安装额外的软件包，这是需要空间的。10GB的分区是一个合理的大小，这为系统的增长提供了空间。LFS系统本身并不会占用这么多的空间，很大一部分空间被用来系统足够的临时空间。编译软件包需要很多磁盘空间，但可以在软件包安装后予以回收。

因为并不是经常有足够编译过程使用的内存，使用一个小的磁盘分区作为交换空间是明智的。内核使用交换空间来存储不经常使用的数据，从而为活动的进程提供更多内存空间。LFS系统可以与宿主系统使用同一块交换分区，因此并不需要创建一个新的交换分区。

打开一个磁盘分区工具，如cfdisk或fdisk，后面接上要创建的新分区所在的硬盘设备名，例如 ```/dev/sda```表示主IDE磁盘。然后创建一个Linux原始分区和一个交换分区。需要的话，你可以参考 ```cfdisk(8)``` 或 ```fdisk(8)``` 查看如何使用这些工具。

>注意
>对于有经验的用户，还可以使用其他分区模式，因为LFS系统可以被安装在软件RAID阵列或者LVM虚拟卷上。但是，这些选项需要initramfs的支持，这脱离了本书的讨论范围。第一次使用LFS的用户并不推荐使用这些分区模式。

请记住新建分区的称号（如，sda5），本书将其称为LFS分区。交换分区的名称也要记住，它将在后面配置```/etc/fstab```时使用。

2.2.1. 其他分区相关问题

LFS邮件列表上经常有一些关于系统分区的建议。这是一个高度主观性的话题。大多数发行版默认使用整个硬盘，除了一个小的交换分区。但有几个原因使得这对LFS来说并不是最佳选择。它降低了灵活性，使得在不同发行版的LFS上共享数据更加困难，同时备份更耗时，也会因为文件系统结构的低效分配而浪费磁盘空间。

2.2.1.1. 根分区

10GB大小的LFS根分区（不要跟```/root```目录相混淆）对大多数系统来说都够用了。它提供了充足的空间来构建LFS、甚至BLFS，同时相对较小，让你可以同时创建多个分区以便实验。

2.2.1.2. 交换分区

大多数发行版自动创建一个交换分区。一般而言，交换空间的推荐大小是物理内存的两倍，虽然这不是很必要。如果磁盘空间有限，保持交换空间在2GB大小，同时监控磁盘交换情况。

磁盘交换重来都不是一件好事。一般而言，你仅仅通关检测磁盘活动和系统对命令的相应就可以判断系统是否在进行交换。磁盘交换时的第一个反应应该是检查一个不理性的命令，例如试图编辑一个5GB的文件。如果总是发生磁盘交换，最好的解决办法是为你的机器购买更多的内存。

2.2.1.3. 适当的分区

有一些的其他分区不是必需的，但在设计磁盘布局时应该考虑。下面列出的并不详尽，但是可以作为指导。

/boot – 强烈建议。 使用该分区存储内核和其他启动信息。为了尽量减少大硬盘潜在的启动问题，将给分区设置为第一个硬盘上的第一个物理分区。一个100MB的分区就够用了

/home – 强烈建议。可以在多个发行版和LFS系统之间共享home目录和用户的偏好设置。它的尺寸普遍较大，取决于可用的磁盘空间。

/usr – 如果为瘦客户端或无盘站提供服务，通常要用的一个单独的 /usr 分区。在LFS中一般不需要它，一个5GB的分区可以处理大多数安装。

/opt – 这个目录对于 BLFS 很有用，在这里可以安装很多大的软件包，比如 Gnome 或 KDE 而不安装到 /usr 目录。如果要用的话，通常需要5-10GB的空间。

/tmp – 一个单独的 /tmp 分区比较少见，当然，如果配置瘦客户端时，它就很有用了。如果需要，该分区通常不必超过2GB。

/usr/src – 该分区对于存放BLFS源代码和在多个LFS系统上分享源代码很有用。它还可以用来作为编译BLFS软件包的地方。该分区的合理大小在30-50GB左右。

想在启动时自动加载的任何单独的分区，都要明确写进 /etc/fstab 文件。 关于如何列出分区的细节，我们将在 Section 8.2, “创建 /etc/fstab 文件” 讨论。

任何一个你想在启动时自动挂载的分区都需要在```/etc/fstab```中描述，至于如何描述请参考8.2节，创建/etc/fstab文件。